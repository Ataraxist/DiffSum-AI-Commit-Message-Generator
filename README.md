# DiffSum - AI-Powered Commit Message Generator

## Overview
DiffSum is an AI-powered Git commit message generator that analyzes your staged changes and suggests structured commit messages following the Conventional Commits format. It integrates with Git Hooks to automate commit message generation when no message is manually provided.

## Features
- Generates commit messages based on staged `git diff`
- Uses OpenAI API to create meaningful and structured messages
- Follows Conventional Commits format
- Automatically integrates with Git Hooks
- Skips AI-generated messages when a manual commit message is detected
- Configurable API key setup
- Toggle between concise (GPT-3.5) and verbose (GPT-4) commit messages

## Installation

To install DiffSum as a global package, run:
```sh
npm install -g diffsum
```

Or install it locally in your project:
```sh
npm install diffsum --save-dev
```

## Setup
After installation, configure your OpenAI API key:
```sh
npx diffsum-config
```
You will be prompted to enter your OpenAI API key, which will be stored for future use.

## Usage
DiffSum runs automatically when committing changes. To use it, simply stage your changes and commit without providing a message:
```sh
git add .
git commit
```
If a message is manually provided, DiffSum will respect it and not override it.

To toggle verbose mode (GPT-4 for detailed messages vs GPT-3.5 for concise messages):
```sh
npx diffsum-verbose
```

## Configuration
The `diffsum` binary is automatically hooked into Git. If needed, manually set it up in `.git/hooks/prepare-commit-msg`:
```sh
echo "npx diffsum" > .git/hooks/prepare-commit-msg
chmod +x .git/hooks/prepare-commit-msg
```

## Example Commit Message
A commit message generated by DiffSum might look like this:
```
feat: improve login validation

- Ensure password length validation matches frontend policy.
- Improve error messages for incorrect login attempts.
- Refactor validation logic for reusability.
```

## Changelog
### v1.2.0
- **Verbose Mode Toggle**: Users can now switch between concise (GPT-3.5) and detailed (GPT-4) commit messages using `npx diffsum-verbose`.
- **Improved API Key Management**: The `setup.js` script now securely replaces and manages the OpenAI API key.
- **Enhanced Error Handling**: Added more robust error messages for missing files and invalid configurations.
- **Performance Improvements**: Optimized `commitMessage.js` to ensure non-blocking operations for Git commits.

- NOTE: Verbose Mode will slow down the commit message generation considerably from ~500ms to ~2000+ms, depending on your commit size

## Dependencies
- `dotenv` ^16.0.0
- `openai` ^4.0.0
- `simple-git` ^3.0.0

## Contributing
Contributions are welcome! Feel free to open an issue or submit a pull request.

## License
This project is licensed under the MIT License.

## Author
Christopher Antico

